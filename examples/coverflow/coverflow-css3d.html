<!DOCTYPE html>
<html>
<meta charset="utf-8" name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

<script src="../../dist/jquery-1.11.0.min.js"></script>
<script src="../../dist/fourjs-1.0.0.js"></script>
<script>window.SIGNALS = signals;</script>

<!--css -->
<link rel="stylesheet" href="css/style.css">


<script src="threex/threex.css3dcoverflow.js"></script>
<script src="../vendor/three.js/examples/js/libs/tween.js"></script>

<script src="threex/threex.reticule/threex.reticule.js"></script>
<script src="threex/threex.reticule/threex.reticuleHelper.js"></script>
<script src="threex/threex.reticule/threex.reticuleAction.js"></script>
<!-- reticule css -->
<link rel="stylesheet" href="threex/threex.reticule/threex.reticule.css">

<div style='position:absolute; bottom: 10px; width: 100%; text-align: center; font-family: Monospace; font-weight: bold; padding;color:white; z-index: 1000;'>
  <a href="https://github.com/DAQRI/fourjs" target="_blank">four.js</a>
  - Example of coverflow in css3d on top of four.js
  - Use arrow key to controls it
  <br/>
  OPTIONS: 
  <a href='javascript:void(0)' onclick='toggleStereo()' style='color: lightgrey'>toggle stereo</a>
  -
  <a href='javascript:void(0)' onclick='toggleReticule()' style='color: lightgrey'>toggle reticule</a>
  <br/>
  Stereo is supported - html template from left pan to right pan - interact with left pan 
  <br/>
  Press 'd' to toggle debug visibility - Press 'u' to update debug to the current position
</div>

<body>
        <div class="fourjs">
                <div class="fourjs-container"></div>
                <div class="fourjs-html"></div>
                <div class="fourjs-html-right"></div>
        </div>
<script>
        function optionPresentInHash(varName) {
            var query = window.location.hash.substring(1);
            var vars = query.split('&');
            for (var i = 0; i < vars.length; i++) {
                if (decodeURIComponent(vars[i]) == varName) {
                    return true
                }
            }
            return false
        }
        var stereoEnabled = optionPresentInHash('stereo') ? true : false
        var reticuleEnabled = optionPresentInHash('noreticule') ? false : true
        // var stereoEnabled       = false;

        function reloadOptions(stereoEnabled, reticuleEnabled){
                var optionsString = ''
                if( stereoEnabled ){
                        optionsString += (optionsString.length ? '&': '') + 'stereo'
                }
                if( reticuleEnabled === false ){
                        optionsString += (optionsString.length ? '&': '') + 'noreticule'
                }
                location.hash   = '#'+optionsString
                location.reload()                
        }

        function toggleStereo(){
                reloadOptions(stereoEnabled === true ? false : true, reticuleEnabled)
                location.reload()
        }

        function toggleReticule(){
                reloadOptions(stereoEnabled, reticuleEnabled === true ? false : true)
                location.reload()
        }

        //////////////////////////////////////////////////////////////////////////////////
        //		Handle Stereo
        //////////////////////////////////////////////////////////////////////////////////

        // trick to load the proper renderers depending if we are in stereo or not
        if( stereoEnabled ){
                var url = "../vendor/three.js/examples/js/renderers/CSS3DStereoRenderer.js"        
        }else{
                var url = "../vendor/three.js/examples/js/renderers/CSS3DRenderer.js"
        }
        document.write('<script src="'+url+'"></scr'+'ipt>')
</script>
<script src="js/createCoverflow.js"></script>
<script src="../css3d-raycast-threejs.js"></script>
<script src="js/main.js"></script>
</body>
</html>